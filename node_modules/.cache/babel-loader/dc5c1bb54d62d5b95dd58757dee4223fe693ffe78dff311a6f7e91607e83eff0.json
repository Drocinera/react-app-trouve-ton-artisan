{"ast":null,"code":"import React,{useState}from\"react\";import{useParams}from\"react-router-dom\";import data from\"../datas.json\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FicheArtisan=()=>{const{id}=useParams();const artisan=data.find(item=>item.id===id);const[formValues,setFormValues]=useState({nom:'',prénom:'',email:'',sujet:'',message:''});const handleChange=event=>{const{name,value}=event.target;setFormValues(prevValues=>({...prevValues,[name]:value}));};// Initialisation de la validation du formulaire\nReact.useEffect(()=>{const forms=document.querySelectorAll('.needs-validation');Array.from(forms).forEach(form=>{form.addEventListener('submit',event=>{if(!form.checkValidity()){event.preventDefault();event.stopPropagation();}form.classList.add('was-validated');},false);});},[]);const handleSubmit=async event=>{event.preventDefault();const formData={...formValues,artisanEmail:artisan.email};console.log('Form data:',formData);try{const response=await fetch('http://localhost:3000/send-email',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});const result=await response.json();console.log(result);}catch(error){console.error('Error sending email:',error);}};if(!artisan){return/*#__PURE__*/_jsx(\"div\",{children:\"Artisan non trouv\\xE9\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"colorTest\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cardStyle row py-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card col border border-dark\",style:{width:'18rem'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"cardColor card-body text-center\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title text-uppercase\",children:artisan.name}),/*#__PURE__*/_jsxs(\"h6\",{className:\"card-subtitle mb-2 text-body-secondary\",children:[\"Note : \",artisan.note,\"/5 \",/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-star text-warning\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:artisan.specialty}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:artisan.location}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:artisan.about}),/*#__PURE__*/_jsx(\"a\",{href:artisan.website,className:\"card-text\",children:artisan.website})]})})}),/*#__PURE__*/_jsxs(\"h2\",{className:\"ficheArtisanTitle text-dark py-2 mx-4 text-center\",children:[\"Une demande ? Remplissez le formulaire pour contacter \",/*#__PURE__*/_jsx(\"strong\",{children:artisan.name}),\" !\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"colorTest2\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"needs-validation\",noValidate:true,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"nom\",className:\"form-label\",children:\"Nom\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"nom\",name:\"nom\",value:formValues.nom,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:\"Veuillez entrer votre nom.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"pr\\xE9nom\",className:\"form-label\",children:\"Pr\\xE9nom\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"pr\\xE9nom\",name:\"pr\\xE9nom\",value:formValues.prénom,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:\"Veuillez entrer votre pr\\xE9nom.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",name:\"email\",value:formValues.email,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:\"Veuillez entrer une adresse email valide.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"sujet\",className:\"form-label\",children:\"Sujet\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"sujet\",name:\"sujet\",value:formValues.sujet,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:\"Veuillez entrer le sujet de votre message.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"message\",className:\"form-label\",children:\"Message\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",id:\"message\",name:\"message\",rows:\"3\",value:formValues.message,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:\"Veuillez entrer votre message.\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Envoyer\"})]})})]});};export default FicheArtisan;","map":{"version":3,"names":["React","useState","useParams","data","jsx","_jsx","jsxs","_jsxs","FicheArtisan","id","artisan","find","item","formValues","setFormValues","nom","prénom","email","sujet","message","handleChange","event","name","value","target","prevValues","useEffect","forms","document","querySelectorAll","Array","from","forEach","form","addEventListener","checkValidity","preventDefault","stopPropagation","classList","add","handleSubmit","formData","artisanEmail","console","log","response","fetch","method","headers","body","JSON","stringify","result","json","error","children","className","style","width","note","specialty","location","about","href","website","noValidate","onSubmit","htmlFor","type","onChange","required","rows"],"sources":["C:/Users/theop/OneDrive/Documents/programmeur/TrouveTonArtisan-React-App/react-app-trouve-ton-artisan/src/Components/FicheArtisan.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport data from \"../datas.json\";\r\n\r\nconst FicheArtisan = () => {\r\n  const { id } = useParams();\r\n  const artisan = data.find(item => item.id === id);\r\n\r\n  const [formValues, setFormValues] = useState({\r\n    nom: '',\r\n    prénom: '',\r\n    email: '',\r\n    sujet: '',\r\n    message: ''\r\n  });\r\n\r\n  const handleChange = (event) => {\r\n    const { name, value } = event.target;\r\n    setFormValues(prevValues => ({\r\n      ...prevValues,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n    // Initialisation de la validation du formulaire\r\n    React.useEffect(() => {\r\n      const forms = document.querySelectorAll('.needs-validation');\r\n  \r\n      Array.from(forms).forEach(form => {\r\n        form.addEventListener('submit', event => {\r\n          if (!form.checkValidity()) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n          }\r\n  \r\n          form.classList.add('was-validated');\r\n        }, false);\r\n      });\r\n    }, []);\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    const formData = { ...formValues, artisanEmail: artisan.email };\r\n\r\n    console.log('Form data:', formData);\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:3000/send-email', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      const result = await response.json();\r\n      console.log(result);\r\n    } catch (error) {\r\n      console.error('Error sending email:', error);\r\n    }\r\n  };\r\n\r\n  if (!artisan) {\r\n    return <div>Artisan non trouvé</div>;\r\n  }\r\n  return (\r\n    <div className=\"colorTest\">\r\n    <div className=\"cardStyle row py-3\">\r\n      <div className=\"card col border border-dark\" style={{ width: '18rem' }}>\r\n        <div className=\"cardColor card-body text-center\">\r\n          <h5 className=\"card-title text-uppercase\">{artisan.name}</h5>\r\n          <h6 className=\"card-subtitle mb-2 text-body-secondary\">\r\n            Note : {artisan.note}/5 <i className=\"fa-solid fa-star text-warning\"></i>\r\n          </h6>\r\n          <p className=\"card-text\">{artisan.specialty}</p>\r\n          <p className=\"card-text\">{artisan.location}</p>\r\n          <p className=\"card-text\">{artisan.about}</p>\r\n          <a href={artisan.website} className=\"card-text\">{artisan.website}</a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <h2 className=\"ficheArtisanTitle text-dark py-2 mx-4 text-center\">\r\n      Une demande ? Remplissez le formulaire pour contacter <strong>{artisan.name}</strong> !\r\n    </h2>\r\n    <div className=\"colorTest2\">\r\n    <form className=\"needs-validation\" noValidate onSubmit={handleSubmit}>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"nom\" className=\"form-label\">Nom</label>\r\n          <input \r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"nom\"\r\n            name=\"nom\"\r\n            value={formValues.nom}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n          <div className=\"invalid-feedback\">\r\n            Veuillez entrer votre nom.\r\n          </div>\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"prénom\" className=\"form-label\">Prénom</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"prénom\"\r\n            name=\"prénom\"\r\n            value={formValues.prénom}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n          <div className=\"invalid-feedback\">\r\n            Veuillez entrer votre prénom.\r\n          </div>\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"email\" className=\"form-label\">Email</label>\r\n          <input\r\n            type=\"email\"\r\n            className=\"form-control\"\r\n            id=\"email\"\r\n            name=\"email\"\r\n            value={formValues.email}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n          <div className=\"invalid-feedback\">\r\n            Veuillez entrer une adresse email valide.\r\n          </div>\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"sujet\" className=\"form-label\">Sujet</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"sujet\"\r\n            name=\"sujet\"\r\n            value={formValues.sujet}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n          <div className=\"invalid-feedback\">\r\n            Veuillez entrer le sujet de votre message.\r\n          </div>\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"message\" className=\"form-label\">Message</label>\r\n          <textarea\r\n            className=\"form-control\"\r\n            id=\"message\"\r\n            name=\"message\"\r\n            rows=\"3\"\r\n            value={formValues.message}\r\n            onChange={handleChange}\r\n            required\r\n          ></textarea>\r\n          <div className=\"invalid-feedback\">\r\n            Veuillez entrer votre message.\r\n          </div>\r\n        </div>\r\n        <button type=\"submit\" className=\"btn btn-primary\">Envoyer</button>\r\n      </form>\r\n    </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FicheArtisan;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}